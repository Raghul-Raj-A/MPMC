#define __SFR_OFFSET 0
#include "avr/io.h"

.global start
.global work

start:
SBI DDRB,5
CBI DDRD,6
CBI DDRD,7
LDI R16,0X00
STS ACSR,R16
STS SFIOR,R16

//stack initialisation
LDI R16,0X04
OUT SPH,R16
LDI R16,0X5F
OUT SPL,R16

LDI R17,OXOB //SOI:RISING EDGE WITH ADIE SET TO 1
OUT ACSR,R17


SEI
L:RJMP L

//AUTOMATICALLY JUMPS TO ISR

ISR::
SBI PORTB,5

/*
work:
LDS R17,ACSR
CPI R17,0X20
BRNE L1
SBI PORTB,5
RJMP L2 //RET
L1:
  CBI PORTB,5
L2: 
  RET
*/
